{
  "datasets" : [ {
    "name" : "a182c1ff",
    "displayName" : "Claim_ratio",
    "query" : "select *\r\nfrom principal_lab_db.ondra_test_gold.claim_ratio_per_product",
    "catalog" : "principal_lab_db",
    "schema" : "ondra_test_silver"
  }, {
    "name" : "f8e65c51",
    "displayName" : "Cust_income_disti",
    "query" : "select \r\nincome_level\r\n, count(*) as pocet_zakaznikov\r\nfrom principal_lab_db.ondra_test_gold.customer_income_distribution\r\ngroup by all"
  }, {
    "name" : "8f6b891b",
    "displayName" : "Agent Performance Claim Amount Analysis",
    "query" : "select \r\nfirst_name\r\n, last_name\r\n, case\r\n    when total_premium < 100000 then 'Low'\r\n    when total_premium < 500000 then 'Medium'\r\n    when total_premium < 1000000 then 'High'\r\n    else 'Very High'\r\n    end as Premium_Tier\r\nfrom principal_lab_db.ondra_test_gold.agent_performance_view\r\nwhere total_claim_amount is not null"
  }, {
    "name" : "4ce1d7b8",
    "displayName" : "premium by region",
    "query" : "select *\r\nfrom principal_lab_db.ondra_test_gold.daily_premium_by_region"
  } ],
  "pages" : [ {
    "name" : "e5436166",
    "displayName" : "General overview",
    "layout" : [ {
      "widget" : {
        "name" : "49e982f6",
        "queries" : [ {
          "name" : "main_query",
          "query" : {
            "datasetName" : "a182c1ff",
            "fields" : [ {
              "name" : "sub_product_name",
              "expression" : "`sub_product_name`"
            }, {
              "name" : "sum(claim_amount)",
              "expression" : "SUM(`claim_amount`)"
            } ],
            "disaggregated" : false
          }
        } ],
        "spec" : {
          "version" : 3,
          "widgetType" : "bar",
          "encodings" : {
            "x" : {
              "fieldName" : "sub_product_name",
              "scale" : {
                "type" : "categorical",
                "sort" : {
                  "by" : "y"
                }
              },
              "axis" : {
                "labelAngle" : 0
              },
              "displayName" : "sub_product_name"
            },
            "y" : {
              "fieldName" : "sum(claim_amount)",
              "scale" : {
                "type" : "quantitative"
              },
              "displayName" : "Sum of claim_amount"
            },
            "label" : {
              "show" : true
            }
          },
          "frame" : {
            "showTitle" : true,
            "title" : "Objem claims podla sub_produktovych skupin"
          },
          "mark" : {
            "colors" : [ {
              "themeColorType" : "selectionColor"
            }, {
              "themeColorType" : "visualizationColors",
              "position" : 2
            }, {
              "themeColorType" : "visualizationColors",
              "position" : 3
            }, {
              "themeColorType" : "visualizationColors",
              "position" : 4
            }, {
              "themeColorType" : "visualizationColors",
              "position" : 5
            }, {
              "themeColorType" : "visualizationColors",
              "position" : 6
            }, {
              "themeColorType" : "visualizationColors",
              "position" : 7
            }, {
              "themeColorType" : "visualizationColors",
              "position" : 8
            }, {
              "themeColorType" : "visualizationColors",
              "position" : 9
            }, {
              "themeColorType" : "visualizationColors",
              "position" : 10
            } ]
          }
        }
      },
      "position" : {
        "x" : 0,
        "y" : 0,
        "width" : 4,
        "height" : 6
      }
    }, {
      "widget" : {
        "name" : "9f790a71",
        "queries" : [ {
          "name" : "main_query",
          "query" : {
            "datasetName" : "f8e65c51",
            "fields" : [ {
              "name" : "income_level",
              "expression" : "`income_level`"
            }, {
              "name" : "sum(pocet_zakaznikov)",
              "expression" : "SUM(`pocet_zakaznikov`)"
            } ],
            "disaggregated" : false
          }
        } ],
        "spec" : {
          "version" : 3,
          "widgetType" : "bar",
          "encodings" : {
            "x" : {
              "fieldName" : "income_level",
              "scale" : {
                "type" : "categorical"
              },
              "displayName" : "income_level"
            },
            "y" : {
              "fieldName" : "sum(pocet_zakaznikov)",
              "scale" : {
                "type" : "quantitative"
              },
              "displayName" : "Sum of pocet_zakaznikov"
            },
            "label" : {
              "show" : true
            }
          },
          "frame" : {
            "showTitle" : true,
            "title" : "Pocet zakaznikov podla prijmu"
          },
          "mark" : {
            "colors" : [ {
              "themeColorType" : "selectionColor"
            }, {
              "themeColorType" : "visualizationColors",
              "position" : 2
            }, {
              "themeColorType" : "visualizationColors",
              "position" : 3
            }, {
              "themeColorType" : "visualizationColors",
              "position" : 4
            }, {
              "themeColorType" : "visualizationColors",
              "position" : 5
            }, {
              "themeColorType" : "visualizationColors",
              "position" : 6
            }, {
              "themeColorType" : "visualizationColors",
              "position" : 7
            }, {
              "themeColorType" : "visualizationColors",
              "position" : 8
            }, {
              "themeColorType" : "visualizationColors",
              "position" : 9
            }, {
              "themeColorType" : "visualizationColors",
              "position" : 10
            } ]
          }
        }
      },
      "position" : {
        "x" : 4,
        "y" : 0,
        "width" : 2,
        "height" : 6
      }
    }, {
      "widget" : {
        "name" : "44c4a674",
        "queries" : [ {
          "name" : "main_query",
          "query" : {
            "datasetName" : "8f6b891b",
            "fields" : [ {
              "name" : "count(*)",
              "expression" : "COUNT(`*`)"
            }, {
              "name" : "Premium_Tier",
              "expression" : "`Premium_Tier`"
            } ],
            "filters" : [ {
              "expression" : "`Premium_Tier` IN (`Premium_Tier`) OR TRUE"
            } ],
            "disaggregated" : false
          }
        } ],
        "spec" : {
          "version" : 3,
          "widgetType" : "pie",
          "encodings" : {
            "angle" : {
              "fieldName" : "count(*)",
              "scale" : {
                "type" : "quantitative"
              },
              "displayName" : "Count of Records"
            },
            "color" : {
              "fieldName" : "Premium_Tier",
              "scale" : {
                "type" : "categorical",
                "mappings" : [ {
                  "value" : "Medium",
                  "color" : {
                    "themeColorType" : "selectionColor"
                  }
                }, {
                  "value" : "Very High",
                  "color" : {
                    "themeColorType" : "visualizationColors",
                    "position" : 6
                  }
                }, {
                  "value" : "Low",
                  "color" : {
                    "themeColorType" : "visualizationColors",
                    "position" : 3
                  }
                } ]
              },
              "displayName" : "Premium_Tier"
            },
            "label" : {
              "show" : true
            },
            "extra" : [ {
              "fieldName" : "Premium_Tier",
              "displayName" : "Premium_Tier"
            } ]
          },
          "frame" : {
            "showTitle" : true,
            "title" : "Performance agentov podla premium"
          }
        }
      },
      "position" : {
        "x" : 0,
        "y" : 6,
        "width" : 3,
        "height" : 6
      }
    }, {
      "widget" : {
        "name" : "bec63a41",
        "queries" : [ {
          "name" : "main_query",
          "query" : {
            "datasetName" : "4ce1d7b8",
            "fields" : [ {
              "name" : "daily_premium",
              "expression" : "`daily_premium`"
            }, {
              "name" : "daily(payment_date)",
              "expression" : "DATE_TRUNC(\"DAY\", `payment_date`)"
            }, {
              "name" : "region",
              "expression" : "`region`"
            } ],
            "filters" : [ {
              "expression" : "`payment_red_flag` IN (`payment_red_flag`) OR TRUE"
            } ],
            "disaggregated" : true
          }
        } ],
        "spec" : {
          "version" : 3,
          "widgetType" : "heatmap",
          "encodings" : {
            "x" : {
              "fieldName" : "daily(payment_date)",
              "axis" : {
                "labelAngle" : 0
              },
              "scale" : {
                "type" : "categorical",
                "sort" : {
                  "by" : "natural-order"
                }
              },
              "displayName" : "payment_date"
            },
            "y" : {
              "fieldName" : "region",
              "scale" : {
                "type" : "categorical"
              },
              "displayName" : "region"
            },
            "color" : {
              "fieldName" : "daily_premium",
              "scale" : {
                "type" : "quantitative",
                "colorRamp" : {
                  "mode" : "scheme",
                  "scheme" : "blues"
                }
              },
              "displayName" : "daily_premium"
            }
          }
        }
      },
      "position" : {
        "x" : 3,
        "y" : 6,
        "width" : 3,
        "height" : 6
      }
    } ],
    "pageType" : "PAGE_TYPE_CANVAS"
  }, {
    "name" : "a4731e30",
    "displayName" : "Untitled page",
    "pageType" : "PAGE_TYPE_CANVAS"
  } ],
  "uiSettings" : {
    "theme" : { }
  }
}